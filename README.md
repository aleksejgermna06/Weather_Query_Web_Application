# üåê Weather Query API Application

<p align="center">
  <img src="https://img.shields.io/badge/Python-3.11+-blue.svg" alt="Python Version">
  <img src="https://img.shields.io/badge/FastAPI-1.0-brightgreen.svg" alt="FastAPI">
  <img src="https://img.shields.io/badge/PostgreSQL-DB-blue.svg" alt="PostgreSQL">
  <img src="https://img.shields.io/badge/Redis-Cache-red.svg" alt="Redis">
  <img src="https://img.shields.io/badge/Tests-11%20Passed-success.svg" alt="Tests Status">
</p>

**Weather Query API Application** ‚Äî —ç—Ç–æ **–±—ç–∫–µ–Ω–¥-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ** –Ω–∞ **FastAPI**, —Ä–µ–∞–ª–∏–∑—É—é—â–µ–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –ø–æ –ø–æ–ª—É—á–µ–Ω–∏—é, –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—é –∏ —Ö—Ä–∞–Ω–µ–Ω–∏—é –∏—Å—Ç–æ—Ä–∏–∏ –ø–æ–≥–æ–¥—ã. –í—Å—è –ª–æ–≥–∏–∫–∞ (—Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è, –ø–∞–≥–∏–Ω–∞—Ü–∏—è, Rate Limit) —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –≤ **JSON-–æ—Ç–≤–µ—Ç–∞—Ö**.

---

## ‚ú® –û—Å–Ω–æ–≤–Ω—ã–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ –∏ —Å—Ç–µ–∫

| –§—É–Ω–∫—Ü–∏—è | –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è / –°—Ç–µ–∫ | –û–ø–∏—Å–∞–Ω–∏–µ | 
| :--- | :--- | :--- | 
| üõ†Ô∏è **Backend Core** | **FastAPI (Python)** | –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –¥–ª—è –≤—ã—Å–æ–∫–æ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏. | 
| üíæ **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö** | **PostgreSQL** (AsyncPG) | –•—Ä–∞–Ω–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ –∑–∞–ø—Ä–æ—Å–æ–≤. | 
| ‚ö° **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ** | **Redis** | –ö—ç—à –Ω–∞ 5 –º–∏–Ω—É—Ç. –û—Ç–≤–µ—Ç –≤–∫–ª—é—á–∞–µ—Ç `served_from_cache: true/false`. | 
| üö¶ **Rate Limiting** | **Redis** | –°—Ç—Ä–æ–≥–∏–π –ª–∏–º–∏—Ç **30 –∑–∞–ø—Ä–æ—Å–æ–≤/–º–∏–Ω** –Ω–∞ IP-–∞–¥—Ä–µ—Å. | 
| üê≥ **–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è** | **Docker Compose** | –í—Å–µ —Å–µ—Ä–≤–∏—Å—ã (App, DB, Redis) –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π. | 

---

## üöÄ –î–µ—Ç–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫: –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

### 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–í–∞–º –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è **Docker** –∏ **Docker Compose**.

1.  **–ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ –ø—Ä–æ–µ–∫—Ç –∏ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –ø–∞–ø–∫—É:**

    ```bash
    git clone https://github.com/aleksejgermna06/Weather_Query_Web_Application
    ```

2.  **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ API-–∫–ª—é—á–∞:**
    –í —Ñ–∞–π–ª `.env` –∏ –≤—Å—Ç–∞–≤—å—Ç–µ –≤–∞—à –∫–ª—é—á **OpenWeatherMap(–∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ)**.

    ```bash
    # –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ .env: WEATHER_API_KEY=–≤–∞—à_–∫–ª—é—á_–∑–¥–µ—Å—å
    ```

### 2. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–æ–≤

–ó–∞–ø—É—Å—Ç–∏—Ç–µ –≤—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ:

```bash
docker compose up --build -d
```
### 3. –ù–∞–∫–∞—Ç—ã–≤–∞–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π Alembic
–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ (–æ–∂–∏–¥–∞–π—Ç–µ 5-10 —Å–µ–∫—É–Ω–¥ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ PostgreSQL), —Å–æ–∑–¥–∞–π—Ç–µ —Ç–∞–±–ª–∏—Ü—ã –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö:

```bash

docker compose exec app alembic upgrade head
```
### üìñ –î–µ—Ç–∞–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ API
–ë–∞–∑–æ–≤—ã–π –∞–¥—Ä–µ—Å: http://localhost:8000.

### üö® –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Swagger UI –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –º–æ–¥–µ–ª–µ–π –¥–∞–Ω–Ω—ã—Ö. –ê–¥—Ä–µ—Å: http://localhost:8000/docs

1. –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–≥–æ–¥—ã (/weather)
–≠—Ç–æ—Ç —ç–Ω–¥–ø–æ–∏–Ω—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∑–∞–ø—Ä–æ—Å, —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –µ–≥–æ –≤ –ë–î –∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∫—ç—à.
```bash
–ü—É—Ç—å: GET /weather
```
–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:

city (string, required): –ù–∞–∑–≤–∞–Ω–∏–µ –≥–æ—Ä–æ–¥–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, London).

unit (string, optional): –ï–¥–∏–Ω–∏—Ü–∞ –∏–∑–º–µ—Ä–µ–Ω–∏—è. –î–æ–ø—É—Å—Ç–∏–º—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è: metric (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) –∏–ª–∏ imperial.

2. –ò—Å—Ç–æ—Ä–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ (/history)
–≠–Ω–¥–ø–æ–∏–Ω—Ç –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –≤—Å–µ–π –∏—Å—Ç–æ—Ä–∏–∏ –∑–∞–ø—Ä–æ—Å–æ–≤.
```bash
–ü—É—Ç—å: GET /history
```
–ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –∏ –ø–∞–≥–∏–Ω–∞—Ü–∏–∏:

city (string, optional): –§–∏–ª—å—Ç—Ä –ø–æ –≥–æ—Ä–æ–¥—É (—Ä–µ–≥–∏—Å—Ç—Ä–æ–Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–π –ø–æ–∏—Å–∫).

date_from (string, optional): –ù–∞—á–∞–ª–æ –¥–∏–∞–ø–∞–∑–æ–Ω–∞ –¥–∞—Ç (YYYY-MM-DD).

date_to (string, optional): –ö–æ–Ω–µ—Ü –¥–∏–∞–ø–∞–∑–æ–Ω–∞ –¥–∞—Ç (YYYY-MM-DD).

page (integer, optional): –ù–æ–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 1).

page_size (integer, optional): –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 10).

3. –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö (/export/csv)
–≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ —Ñ–æ—Ä–º–∞—Ç–µ CSV, –∏—Å–ø–æ–ª—å–∑—É—è —Ç–µ –∂–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏, —á—Ç–æ –∏ /history.
```bash
–ü—É—Ç—å: GET /export/csv
```

4. "–ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è" (/health)
–ü—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ –≤—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (–ë–î, –≤–Ω–µ—à–Ω–∏–µ API) —Ä–∞–±–æ—Ç–∞—é—Ç.
```bash
–ü—É—Ç—å: GET /health
```
–û–∂–∏–¥–∞–µ–º—ã–π –æ—Ç–≤–µ—Ç: JSON —Å –∞–∫—Ç—É–∞–ª—å–Ω—ã–º–∏ —Å—Ç–∞—Ç—É—Å–∞–º–∏ PostgreSQL –∏ –≤–Ω–µ—à–Ω–µ–≥–æ API.

‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (Unit Tests)
–î–ª—è –∑–∞–ø—É—Å–∫–∞ —Ç–µ—Å—Ç–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä test:
```bash

docker compose run --rm test
```
–í—Å–µ 11 —Ç–µ—Å—Ç–æ–≤ –¥–æ–ª–∂–Ω—ã –ø—Ä–æ–π—Ç–∏ —É—Å–ø–µ—à–Ω–æ, –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –ª–æ–≥–∏–∫–∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è, Rate Limiting –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏.
